<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>Flappy Bird</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>

    <style>
        body {
            text-align: center;
        }

        canvas {
            border: 1px solid #000000;
        }
    </style>

</head>

<body>
    <script>    
        class Example extends Phaser.Scene
        {
            preload ()
            {
                this.load.html('nameform', 'aux/form.html');
                this.load.setCORS("anonymous");
                this.load.setCORS("Anonymous");
            }

            create ()
            {
                this.game.load.crossOrigin = 'anonymous';
                this.game.load.crossOrigin = 'Anonymous';

                const text = this.add.text(300, 10, 'Please enter your name', { color: 'white', fontSize: '20px '});

                var html = '<input type="text" name="name" placeholder="Full Name" />'
                const element = this.add.dom(400, 0).createFromHTML(html);

                element.addListener('click');

                element.on('click', function (event)
                {

                    if (event.target.name === 'playButton')
                    {
                        const inputText = this.getChildByName('nameField');

                        //  Have they entered anything?
                        if (inputText.value !== '')
                        {
                            //  Turn off the click events
                            this.removeListener('click');

                            //  Hide the login element
                            this.setVisible(false);

                            //  Populate the text with whatever they typed in
                            text.setText(`Welcome ${inputText.value}`);
                        }
                        else
                        {
                            //  Flash the prompt
                            this.scene.tweens.add({
                                targets: text,
                                alpha: 0.2,
                                duration: 250,
                                ease: 'Power3',
                                yoyo: true
                            });
                        }
                    }

                });
            
                this.tweens.add({
                    targets: element,
                    y: 300,
                    duration: 3000,
                    ease: 'Power3'
                });

            }
        }

        const config = {
            type: Phaser.AUTO,
            width: 800,
            height: 600,
            backgroundColor: '#222288',
            dom: {
                createContainer: true
            },
            scene: Example
        };

        const game = new Phaser.Game(config);
    </script>
</body>
</html>
